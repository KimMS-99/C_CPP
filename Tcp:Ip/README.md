# Tcp/Ip

## 목차

0. [IP, 넷마스크, 게이트웨이 및 TCP/IP 기초](#ip-넷마스크-게이트웨이-및-tcpip-기초)
1. [네트워크 프로그래밍과 소켓의 이해](./Ch1#Ch1)
2. [소켓의 타입과 프로토콜의 설정](./Ch2#Ch2)

---

## IP, 넷마스크, 게이트웨이 및 TCP/IP 기초

### 1. IP 주소 (Internet Protocol Address)

IP 주소는 컴퓨터 네트워크에서 장치들이 서로를 인식하고 통신하기 위해 사용하는 고유한 식별 번호입니다. 현재 IPv4와 IPv6 두 가지 버전이 사용됩니다.

- **IPv4**: 32비트 주소. 4개의 8비트 옥텟(0~255)으로 표현. 예: `192.168.1.1`
- **IPv6**: 128비트 주소. 콜론(:)으로 구분된 8개의 16진수 블록. 예: `2001:0db8:85a3:0000:0000:8a2e:0370:7334`

#### 📌 IP 주소 클래스

| 클래스 | 시작 범위        | 기본 서브넷 마스크 | 네트워크 수 | 호스트 수     | 용도         |
|--------|------------------|--------------------|-------------|---------------|--------------|
| A      | 0.0.0.0 ~ 127.255.255.255 | 255.0.0.0        | 128개       | 약 1,670만 개 | 대규모 기업 |
| B      | 128.0.0.0 ~ 191.255.255.255 | 255.255.0.0      | 16,384개    | 약 6.5만 개   | 중규모 기업 |
| C      | 192.0.0.0 ~ 223.255.255.255 | 255.255.255.0    | 209만 개    | 254개        | 소규모 기업 |
| D      | 224.0.0.0 ~ 239.255.255.255 | -                | -           | -            | 멀티캐스트용 |
| E      | 240.0.0.0 ~ 255.255.255.255 | -                | -           | -            | 실험용       |

---

### 2. 서브넷 마스크 (Subnet Mask)

서브넷 마스크는 IP 주소의 네트워크 부분과 호스트 부분을 구분하는 데 사용됩니다.

#### 🧮 서브넷 연산 예시

IP 주소: `192.168.10.67`  
서브넷 마스크: `255.255.255.0`

```
192.168.10.67   → 11000000.10101000.00001010.01000011  
255.255.255.0   → 11111111.11111111.11111111.00000000  
-----------------------------------------------
네트워크 주소    → 192.168.10.0
```

- 유효 호스트: `192.168.10.1 ~ 192.168.10.254`
- 브로드캐스트 주소: `192.168.10.255`

#### 🧾 CIDR 표기법

- `192.168.1.0/24` → `255.255.255.0`
- `10.0.0.0/8` → `255.0.0.0`
- `/24`는 앞 24비트가 네트워크 주소라는 의미

---

### 3. 게이트웨이 (Gateway)

게이트웨이는 다른 네트워크로 나가는 출입구 역할을 하는 장치입니다. 주로 공유기 또는 라우터가 해당 역할을 수행합니다.

#### 📦 게이트웨이 동작 예시

- 내 PC: `192.168.0.10`
- 게이트웨이: `192.168.0.1`
- 목적지: `8.8.8.8` (구글 DNS)

➡️ 패킷은 목적지가 내 서브넷(`192.168.0.0/24`)이 아니므로 **게이트웨이**로 전달됩니다.

---

## 4. TCP/IP 프로토콜

TCP/IP는 통신을 위한 프로토콜 집합입니다. 데이터 전송 신뢰성과 라우팅, 포트 기반 식별 등을 포함합니다.

### TCP (Transmission Control Protocol)

- 연결 지향
- 신뢰성 보장 (ACK, 재전송, 순서 보장)
- 사용 예: HTTP, FTP, SMTP

### UDP (User Datagram Protocol)

- 연결 없음
- 빠르지만 신뢰성 없음
- 사용 예: 게임, VoIP, 스트리밍

---

## 5. TCP/IP 4계층 모델

| 계층 | 기능 | 프로토콜 예 |
|------|------|-------------|
| 애플리케이션 | 사용자 서비스 | HTTP, FTP, DNS |
| 전송 계층 | 종단 간 통신 | TCP, UDP |
| 인터넷 계층 | 라우팅 및 주소 | IP, ICMP, ARP |
| 네트워크 인터페이스 | 물리 전송 | Ethernet, Wi-Fi |

---

## 6. NAT & 프라이빗 IP

- 프라이빗 IP:
  - 10.0.0.0/8
  - 172.16.0.0/12
  - 192.168.0.0/16

- NAT(Network Address Translation): 내부 IP ↔ 공인 IP 매핑
- 포트포워딩: 외부에서 내부 서비스 접근

---

## 7. TCP 연결 절차

### 📡 3-way Handshake (연결 설정)

1. 클라이언트 → 서버: SYN
2. 서버 → 클라이언트: SYN + ACK
3. 클라이언트 → 서버: ACK

### 🔚 4-way Termination (연결 종료)

1. FIN
2. ACK
3. FIN
4. ACK

---

## 8. 실습 명령어

- `ip a` / `ifconfig`: IP 확인
- `ip route` / `netstat -rn`: 게이트웨이, 라우팅 테이블 확인
- `ping`: 연결 확인
- `traceroute`: 경로 확인
- `nslookup`, `dig`: DNS 테스트
- `wireshark`: 패킷 분석

---

## 9. 핵심 용어 요약

| 용어 | 설명 |
|------|------|
| ICMP | ping, 네트워크 오류 알림 |
| ARP | IP ↔ MAC 주소 변환 |
| DHCP | IP 주소 자동 할당 |
| DNS | 도메인 ↔ IP 변환 |

---